---
import MainLayout from "../layouts/MainLayout.astro";
import { getCollection } from "astro:content";

const projects = (await getCollection("projects"))
  .sort((a, b) => b.data.publishDate.valueOf() - a.data.publishDate.valueOf())
  .slice(0, 20);
---

<MainLayout title={"Projects"}>
  <div class="mx-auto max-w-7xl px-1 my-8 mt-12">
    <div>
      <h1
        class="text-4xl font-extrabold text-center bg-gradient-to-r from-blue-600 to-purple-800 text-transparent bg-clip-text"
      >
        Featured Work
      </h1>
      <p class="mt-4 text-lg text-center">
        Take a look below at some of my recent work
      </p>
    </div>
    <div class="flex flex-row flex-wrap mb-4 justify-center">
      {
        projects.map((projects) => (
          <>
            <div class=" xl:w-1/4 lg:w-1/3 md:w-1/2 sm:w-full p-4">
              <a
                href={`/projects/${projects.slug}`}
                class="c-card block bg-white shadow-md hover:shadow-xl rounded-lg overflow-hidden hover:scale-[105%] hoverImgEffect"
              >
                <div class="relative pb-48 overflow-hidden">
                  <img
                    class="absolute inset-0 h-full w-full object-cover"
                    src={projects.data.img}
                    alt={projects.data.img_alt}
                  />
                </div>
                <div class="p-4">
                  <span class="inline-block px-2 py-1 leading-none bg-blue-200 text-blue-800 rounded-full font-semibold uppercase tracking-wide text-xs">
                    {projects.data.tags}
                  </span>
                  <h2 class="mt-2 mb-2  font-bold">{projects.data.title}</h2>
                  <p class="text-sm">{projects.data.description}</p>
                </div>
              </a>
            </div>
          </>
        ))
      }
    </div>
  </div>
</MainLayout>